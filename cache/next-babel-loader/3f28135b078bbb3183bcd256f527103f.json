{"ast":null,"code":"import { parse } from \"./logParser\";\nexport async function loadFiles() {\n  let logs_api_uri = \"https://bah2tkltg6.execute-api.eu-central-1.amazonaws.com/test/list\";\n  let response = await fetch(logs_api_uri);\n  let resp_json_str = await response.json();\n  let keys_list = JSON.parse(resp_json_str.body).keys;\n  let promises = keys_list.map(key => fetch(`${logs_api_uri}/${key}`));\n  let respArray = await Promise.all(promises);\n  let json_promises = respArray.map(resp => resp.json());\n  let textArray = await Promise.all(json_promises);\n  let dataArray = textArray.map(e => parse(e.text));\n  dataArray.forEach((data, i) => data.key = keys_list[i]);\n  dataArray.sort(function (a, b) {\n    return new Date(b.runningDate) - new Date(a.runningDate);\n  });\n  return dataArray;\n}","map":{"version":3,"sources":["/Users/alexanderbol/WebstormProjects/dfm-monitor/models/loadFiles.js"],"names":["parse","loadFiles","logs_api_uri","response","fetch","resp_json_str","json","keys_list","JSON","body","keys","promises","map","key","respArray","Promise","all","json_promises","resp","textArray","dataArray","e","text","forEach","data","i","sort","a","b","Date","runningDate"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,aAApB;AAEA,OAAO,eAAeC,SAAf,GAA2B;AAC9B,MAAIC,YAAY,GAAG,qEAAnB;AAEA,MAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACF,YAAD,CAA1B;AACA,MAAIG,aAAa,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA1B;AACA,MAAIC,SAAS,GAAGC,IAAI,CAACR,KAAL,CAAWK,aAAa,CAACI,IAAzB,EAA+BC,IAA/C;AAEA,MAAIC,QAAQ,GAAGJ,SAAS,CAACK,GAAV,CAAeC,GAAG,IAAIT,KAAK,CAAE,GAAEF,YAAa,IAAGW,GAAI,EAAxB,CAA3B,CAAf;AACA,MAAIC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAYL,QAAZ,CAAtB;AACA,MAAIM,aAAa,GAAGH,SAAS,CAACF,GAAV,CAAcM,IAAI,IAAIA,IAAI,CAACZ,IAAL,EAAtB,CAApB;AACA,MAAIa,SAAS,GAAG,MAAMJ,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAAtB;AACA,MAAIG,SAAS,GAAGD,SAAS,CAACP,GAAV,CAAeS,CAAC,IAAIrB,KAAK,CAACqB,CAAC,CAACC,IAAH,CAAzB,CAAhB;AACAF,EAAAA,SAAS,CAACG,OAAV,CAAmB,CAACC,IAAD,EAAMC,CAAN,KAAYD,IAAI,CAACX,GAAL,GAAWN,SAAS,CAACkB,CAAD,CAAnD;AACAL,EAAAA,SAAS,CAACM,IAAV,CAAe,UAASC,CAAT,EAAWC,CAAX,EAAa;AACxB,WAAO,IAAIC,IAAJ,CAASD,CAAC,CAACE,WAAX,IAA0B,IAAID,IAAJ,CAASF,CAAC,CAACG,WAAX,CAAjC;AACH,GAFD;AAGA,SAAOV,SAAP;AACH","sourcesContent":["import {parse} from \"./logParser\";\n\nexport async function loadFiles() {\n    let logs_api_uri = \"https://bah2tkltg6.execute-api.eu-central-1.amazonaws.com/test/list\";\n\n    let response = await fetch(logs_api_uri);\n    let resp_json_str = await response.json()\n    let keys_list = JSON.parse(resp_json_str.body).keys;\n\n    let promises = keys_list.map (key => fetch(`${logs_api_uri}/${key}`))\n    let respArray = await Promise.all(promises)\n    let json_promises = respArray.map(resp => resp.json())\n    let textArray = await Promise.all(json_promises);\n    let dataArray = textArray.map( e => parse(e.text));\n    dataArray.forEach( (data,i) => data.key = keys_list[i] )\n    dataArray.sort(function(a,b){\n        return new Date(b.runningDate) - new Date(a.runningDate);\n    });\n    return dataArray;\n}\n"]},"metadata":{},"sourceType":"module"}