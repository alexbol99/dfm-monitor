{"ast":null,"code":"import { parse } from \"./logParser\";\nimport fetch from 'node-fetch';\nexport async function loadFiles() {\n  let logs_api_uri = \"https://bah2tkltg6.execute-api.eu-central-1.amazonaws.com/test/list\";\n  let response = await fetch(logs_api_uri);\n  let resp_json_str = await response.json();\n  let keys_list = JSON.parse(resp_json_str.body).keys;\n  let promises = keys_list.map(key => fetch(`${logs_api_uri}/${key}`));\n  let respArray = await Promise.all(promises);\n  let json_promises = respArray.map(resp => resp.json());\n  let textArray = await Promise.all(json_promises);\n  let dataArray = textArray.map(e => parse(e.text));\n  dataArray.forEach((data, i) => data.key = keys_list[i]);\n  dataArray.sort(function (a, b) {\n    return new Date(b.runningDate) - new Date(a.runningDate);\n  });\n  return dataArray;\n}","map":null,"metadata":{},"sourceType":"module"}